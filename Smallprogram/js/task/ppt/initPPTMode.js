drill.task(async(e,a)=>{let{initActiveId:t}=a;const[o,n,i,l]=await e("common/data","util/animationCSSUtil","util/pageUtil","data -r"),r=await e("../h5/h5Util");n.initAnimation(l.animation);let p=$(".p_main");console.log(t);let s=p.children().eq(t).prop("pageData");o.on("pageLoaded",(e,a)=>{i.clearPageAnime(a.page)}),s.startLoad();let d=0,c=[];$(".p_main > .page").each((e,a)=>{let o=$(a);t===e?o.attr("active",1):o.attr("active",0);let i=a.pageData;t===e&&(d=c.length),c.push({type:"page",ele:a,data:i}),e==t?o.css(n.toCSSObj(i.pos1_after)):e<t?o.css(n.toCSSObj(i.pos2_after)):o.css(n.toCSSObj(i.pos1));let l={},r=new Set;Array.from(i).forEach(e=>{if(e&&e.animateIn){r.add(e.animateInDelay),(l[e.animateInDelay]||(l[e.animateInDelay]={type:"group",arr:[]})).arr.push({type:"ele",data:e})}}),(r=Array.from(r)).sort(),r.forEach(e=>{c.push(l[e])})});let g=top;console.log(c,o),p.on("click",e=>{m()});let m=(e={})=>{let a=c[++d];if(a){switch(a.type){case"group":a.arr.forEach(a=>{i.runEleAnime($(`[outer-id="${a.data.outerId}"] .p_ele`),a.data,{noDelay:1,noAnime:e.noAnime})});break;case"page":r.toPage($(a.ele).index())}g.postMessage({type:"pptModeBack",cid:d,count:c.length},"*"),console.log("arrId => ",d)}else console.log("最后一页了")};window.addEventListener("message",async e=>{let{data:a}=e;switch(console.log(e),a.type){case"pptModeCommond":let{rid:t}=a;if(t===d)return;let o=t,n=c[t];for(;"page"!==n.type;)n=c[--o];for(await n.data.startLoad(),d=t-1,m(),o++;o<t;o++)c[o].arr.forEach(e=>{i.runEleAnime($(`[outer-id="${e.data.outerId}"] .p_ele`),e.data,{noDelay:1,noAnime:!0})})}})});
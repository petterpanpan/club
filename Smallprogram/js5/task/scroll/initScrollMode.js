"use strict";var _slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function _asyncToGenerator(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(i,a){try{var o=e[i](a),u=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}("next")})}}drill.init(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n){var r,i,a,o,u,c,s,f,l,d,p,m,h=n.initActiveId;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("common/data","util/animationCSSUtil","util/pageUtil","data -r");case 2:return r=t.sent,i=_slicedToArray(r,4),a=i[0],o=i[1],u=i[2],c=i[3],o.initAnimation(c.animation),s=$(".p_main"),f=s.children().eq(h),l=f.prop("pageData"),(d=new Set).add(h),a.on("pageLoaded",function(t,e){e.pageId>=h?u.clearPageAnime(e.page):d.add(e.pageId)}),p=s[0],t.next=18,l.startLoad();case 18:return p.scrollTop=p.offsetHeight*h,t.next=21,new Promise(function(t){return setTimeout(t,300)});case 21:u.runPageAnime(f),m=0,p.addEventListener("scroll",function(t){if(!m){m=1,setTimeout(function(){m=0},200);var e=p.scrollTop,n=(p.offsetWidth,p.offsetHeight),r=Math.floor((e+n/4)/n);d.has(r)||(d.add(r),u.runPageAnime(s.children().eq(r)))}});case 24:case"end":return t.stop()}},t,void 0)}));return function(e,n){return t.apply(this,arguments)}}());